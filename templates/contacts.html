{% extends "base.html" %}
{% block content %}
<div class="contacts-container">
  <div class="contacts-header">Contacts</div>
  <form method="get" action="" class="contacts-filter-form">
      <label>Filter:
          <select name="filter">
              <option value="all" {% if filter_type=='all' %}selected{% endif %}>All</option>
              <option value="no_name" {% if filter_type=='no_name' %}selected{% endif %}>Missing Name</option>
              <option value="no_address" {% if filter_type=='no_address' %}selected{% endif %}>Missing Address</option>
              <option value="no_name_or_address" {% if filter_type=='no_name_or_address' %}selected{% endif %}>Missing Name & Address</option>
          </select>
      </label>
      <label>Sort by:
          <select name="sort_by">
              <option value="id" {% if sort_by=='id' %}selected{% endif %}>ID</option>
              <option value="first_name" {% if sort_by=='first_name' %}selected{% endif %}>First Name</option>
              <option value="last_name" {% if sort_by=='last_name' %}selected{% endif %}>Last Name</option>
              <option value="phone" {% if sort_by=='phone' %}selected{% endif %}>Phone</option>
              <option value="address" {% if sort_by=='address' %}selected{% endif %}>Address</option>
              <option value="tag" {% if sort_by=='tag' %}selected{% endif %}>Tag</option>
          </select>
      </label>
      <label>Order:
          <select name="sort_order">
              <option value="asc" {% if sort_order=='asc' %}selected{% endif %}>Ascending</option>
              <option value="desc" {% if sort_order=='desc' %}selected{% endif %}>Descending</option>
          </select>
      </label>
      <button type="submit">Apply</button>
  </form>
  <table class="contacts-table">
      <tr>
          <th>ID</th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Phone</th>
          <th>Address</th>
          <th>Tag</th>
          <th>Notes</th>
          <th>Actions</th>
      </tr>
      {% for c in contacts %}
      <tr>
          <td>{{ c.id }}</td>
          <td>{{ c.first_name }}</td>
          <td>{{ c.last_name }}</td>
          <td>{{ c.phone }}</td>
          <td>{{ c.address }}</td>
          <td>{{ c.tag }}</td>
          <td>{{ c.notes }}</td>
          <td>
              <div class="contacts-actions">
                  <a href="{{ url_for('edit_contact', contact_id=c.id) }}">Edit</a>
                  <form method="post" action="{{ url_for('delete_contact', contact_id=c.id) }}" style="display:inline;">
                      <button type="submit" onclick="return confirm('Delete contact?');">Delete</button>
                  </form>
              </div>
          </td>
      </tr>
      {% endfor %}
  </table>
</div>
{% endblock %}
